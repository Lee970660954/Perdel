<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=\, initial-scale=1.0">
    <title>实现class的私有属性</title>
</head>
<body>
    <p>
        class私有属性的特点：
            1.可以被class内部的方法访问，但是不能在class外部被访问。
            2.子类不能继承父类的私有属性。
    </p>
    <p>
        ES6中class私有属性的定义：
            1.在属性名之前加上"#"，用于表示私有属性（不使用private关键字定义很大程度上是因为ES6在设计时在向python靠拢）。
            2.需要经过Babel等编译器编译才能使用。
    </p>
    <p>
        实现class私有属性的方案：
            1.约定命名方案。
            2.闭包方案。
            3.闭包进阶版方案。
            4.Symbol方案。
            5.Map方案。
    </p>
    <p>
        <h1>方案一.约定命名方案</h1>
        规定私有属性使用特殊的命名规范，开发人员遵循这个命名规范来定义和使用私有属性。
        优点：实现简单，代码可读性强。
        缺点：只是人为约定，没有真正的实现私有属性在class外部无法访问的特点。
        <h1>方案二.闭包方案</h1>
        利用闭包来解决，在constructor构造函数中定义私有属性为当前函数作用域的变量，创建一个实例属性，其值为函数且函数内部返回刚才定义的私有属性形成闭包。
        优点：实现了class私有属性不能在class外部访问的特点。
        缺点：
        （1）没有实现class私有属性能在class内部任何函数访问的特点。
        （2）如果私有属性增多，需要在构造函数中定义大量闭包变量，代码臃肿、代码可读性不强，引用私有变量的方法没有定义在原型链上且造成内存浪费。
        <h1>方案三.闭包进阶版方案</h1>
        利用IIFE（立即执行函数）建立闭包，在其中创建私有属性变量和class并返回class，在class的任意方法中可以引用这个私有属性变量。
        优点：实现了class私有属性不能在class外部访问和在class内部任何函数中都可访问的两个特点。
        缺点：
        （1）如果私有属性增多，需要在构造函数中定义大量闭包变量，代码臃肿、代码可读性不强，引用私有变量的方法没有定义在原型链上且造成内存浪费。
        （2）多个实例共用同一个私有属性变量，只是实现了内外部访问权限的控制，但是没有实现实例的私有化。
        <h1>方案四.Symbol方案</h1>
        利用IIFE（立即执行函数）建立闭包，在其中创建私有属性变量和class并返回class，在class的任意方法中可以引用这个私有属性变量。不同点在于这次定义的闭包变量使用Symbol初始化，并且作为私有属性变量的字段使用，完成了私有变量的特性。
        优点：实现了class私有属性不能在class外部访问和在class内部任何函数中都可访问的两个特点，并且实现了实例私有属性的私有化。
        缺点：
        （1）如果私有属性增多，需要在构造函数中定义大量闭包变量，代码臃肿、代码可读性不强，引用私有变量的方法没有定义在原型链上且造成内存浪费。
        （2）不是绝对安全，虽然symbol数据类型具有唯一性，但是依然可以通过Object.getOwnPropertySymbols API获取symbol属性。
        <h1>方案五.Map方案</h1>
        利用Map存储每个实例的私有属性对象集合，实现一个internal方法实现实例的私有属性对象的存储和访问。
        优点：实现了class私有属性不能在class外部访问和在class内部任何函数中都可访问的两个特点，并且实现了实例私有属性的私有化。除此之外，额外实现了实例私有属性的动态添加。
        缺点：暂无。
    </p>
    <!-- <script src="./约定命名方案.js"></script> -->
    <!-- <script src="./闭包.js"></script> -->
    <!-- <script src="./闭包进阶版.js"></script> -->
    <!-- <script src="./Symbol.js"></script> -->
    <!-- <script src="./Map.js"></script> -->
    <script src="Proxy.js"></script>
</body>
</html>